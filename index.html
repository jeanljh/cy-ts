<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>index.html</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:1,&quot;tests&quot;:1,&quot;passes&quot;:0,&quot;pending&quot;:0,&quot;failures&quot;:1,&quot;start&quot;:&quot;2022-08-21T10:02:43.717Z&quot;,&quot;end&quot;:&quot;2022-08-21T10:03:15.829Z&quot;,&quot;duration&quot;:31745,&quot;testsRegistered&quot;:1,&quot;passPercent&quot;:0,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:0,&quot;hasSkipped&quot;:false},&quot;results&quot;:[{&quot;uuid&quot;:&quot;36b4c283-251e-465a-b674-a197a609267e&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;cypress/e2e/test.cy.ts&quot;,&quot;file&quot;:&quot;cypress/e2e/test.cy.ts&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3e924db5-6399-4e88-889b-1b9763987713&quot;,&quot;title&quot;:&quot;Test Suite&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Test Sorting in Search Result&quot;,&quot;fullTitle&quot;:&quot;Test Suite Test Sorting in Search Result&quot;,&quot;timedOut&quot;:null,&quot;duration&quot;:31745,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const prices = [];\ncy.get(&#x27;.main-menu__search&#x27;).click()\n    .get(&#x27;.input__field&#x27;).type(data_json_1.default.searchValue)\n    .intercept(&#x27;POST&#x27;, &#x27;https://m.stripe.com/6&#x27;).as(&#x27;post&#x27;)\n    .get(&#x27;[data-test=searchProductsButton]&#x27;).click()\n    .wait(&#x27;@post&#x27;)\n    .get(&#x27;[data-test=productList] &gt; a&#x27;).its(&#x27;length&#x27;).should(&#x27;be.a&#x27;, &#x27;number&#x27;).and(&#x27;be.gt&#x27;, 0)\n    .wait(1000)\n    .get(&#x27;div.add-to-cart &gt; button:not([disabled])&#x27;).each((e, i) =&gt; {\n    cy.log(&#x27;output&#x27;, e.parent().prev(&#x27;.product-list-item__price&#x27;).find(&#x27;span:last-child&#x27;).text());\n    cy.get(&#x27;.product-list-item__price &gt; :not([class$=undiscounted_price])&#x27;).eq(i)\n        .invoke(&#x27;text&#x27;)\n        .invoke(&#x27;replace&#x27;, /&amp;nbsp;/g, &#x27;&#x27;)\n        .invoke(&#x27;replace&#x27;, /,/g, &#x27;&#x27;)\n        .invoke(&#x27;substring&#x27;, 4)\n        .then(Number)\n        .then((n) =&gt; prices.push(n));\n})\n    // .get(&#x27;.product-list-item__price &gt; :not([class$=undiscounted_price])&#x27;).each(e =&gt;\n    //     prices.push(Number(e.text().replace(/&amp;nbsp;/g, &#x27;&#x27;).substring(4))))\n    // verify sort by ascending price\n    .get(&#x27;[data-test=sortingDropdown]&#x27;).as(&#x27;ddlSort&#x27;).contains(&#x27;Clear&#x27;).click()\n    .intercept(&#x27;POST&#x27;, &#x27;https://m.stripe.com/6&#x27;).as(&#x27;post2&#x27;)\n    .get(&#x27;div[id^=react-select&#x27;).as(&#x27;selSortOption&#x27;).contains(&#x27;Price Low-High&#x27;).click()\n    .wait(&#x27;@post2&#x27;)\n    .wait(1000)\n    .wrap(prices).then(p =&gt; {\n    p = Cypress._.sortBy(p);\n    // p.sort((a, b) =&gt; a - b) // method 2\n    cy.log(JSON.stringify(p));\n    cy.get(&#x27;div.add-to-cart &gt; button:not([disabled])&#x27;).each((e, i) =&gt; {\n        cy.get(&#x27;.product-list-item__price &gt; :not([class$=undiscounted_price])&#x27;).eq(i)\n            .invoke(&#x27;text&#x27;)\n            .invoke(&#x27;replace&#x27;, /&amp;nbsp;/g, &#x27;&#x27;)\n            .invoke(&#x27;replace&#x27;, &#x27;,&#x27;, &#x27;&#x27;)\n            .invoke(&#x27;substring&#x27;, 4)\n            .then(Number)\n            .should(&#x27;eq&#x27;, p[i]);\n    });\n    // cy.get(&#x27;.product-list-item__price &gt; :not([class$=undiscounted_price])&#x27;).each((e, i) =&gt; {\n    //     expect(Number(e.text().replace(/&amp;nbsp;/g, &#x27;&#x27;).substring(4))).to.eq(p[i])\n    // })\n})\n    // verify sort by descending price\n    .get(&#x27;@ddlSort&#x27;).contains(&#x27;Price Low-High&#x27;).click()\n    .intercept(&#x27;POST&#x27;, &#x27;https://m.stripe.com/6&#x27;).as(&#x27;post3&#x27;)\n    .get(&#x27;@selSortOption&#x27;).contains(&#x27;Price High-Low&#x27;).click()\n    .wait(&#x27;@post3&#x27;)\n    .wrap(prices).then(p =&gt; {\n    p = Cypress._.sortBy(p).reverse();\n    // p.sort((a, b) =&gt; b - a) // method 2\n    cy.get(&#x27;div.add-to-cart &gt; button:not([disabled])&#x27;).each((e, i) =&gt; {\n        cy.get(&#x27;.product-list-item__price &gt; :not([class$=undiscounted_price])&#x27;).eq(i)\n            .invoke(&#x27;text&#x27;)\n            .invoke(&#x27;replace&#x27;, /&amp;nbsp;/g, &#x27;&#x27;)\n            .invoke(&#x27;replace&#x27;, &#x27;,&#x27;, &#x27;&#x27;)\n            .invoke(&#x27;substring&#x27;, 4)\n            .then(Number)\n            .should(&#x27;eq&#x27;, p[i]);\n    });\n    // cy.get(&#x27;.product-list-item__price &gt; :not([class$=undiscounted_price])&#x27;).each((e, i) =&gt; {\n    //     expect(Number(e.text().replace(/&amp;nbsp;/g, &#x27;&#x27;).substring(4))).to.eq(p[i])\n    // })\n});&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 46 to equal 1046&quot;,&quot;estack&quot;:&quot;AssertionError: expected 46 to equal 1046\n    at Context.eval (https://www.drinkies.my/__cypress/tests?p=cypress/e2e/test.cy.ts:228:22)&quot;,&quot;diff&quot;:&quot;- 46\n+ 1046\n&quot;},&quot;uuid&quot;:&quot;bb5518cb-2809-4e45-92a6-b9fcc191c2f0&quot;,&quot;parentUUID&quot;:&quot;3e924db5-6399-4e88-889b-1b9763987713&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;bb5518cb-2809-4e45-92a6-b9fcc191c2f0&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:31745,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;7.0.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:false,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;7.1.3&quot;},&quot;marge&quot;:{&quot;options&quot;:{&quot;id&quot;:&quot;default&quot;,&quot;reportDir&quot;:&quot;cypress/results/json&quot;,&quot;overwrite&quot;:false,&quot;html&quot;:false,&quot;json&quot;:true},&quot;version&quot;:&quot;6.2.0&quot;}}}" data-config="{&quot;reportFilename&quot;:&quot;index&quot;,&quot;reportDir&quot;:&quot;public&quot;,&quot;reportTitle&quot;:&quot;cy-ts&quot;,&quot;reportPageTitle&quot;:&quot;index.html&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;assetsDir&quot;:&quot;public/assets&quot;,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:false,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;htmlFile&quot;:&quot;/home/runner/work/cy-ts/cy-ts/public/index.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>